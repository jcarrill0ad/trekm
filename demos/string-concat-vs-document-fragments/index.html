<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>speed shootout</title>
    <script type="text/javascript" charset="utf-8">
      var arrayPush = function(box){
        box.innerHTML = '';
        var ary = []
        ary.push('<div>');
        ary.push( '<p>');
        ary.push( 'You could search for it on ');
        ary.push( '<a ');
        ary.push( 'href="http://www.google.com"');
        ary.push( '/>');
        ary.push( 'Google');
        ary.push( '</a>');
        ary.push( ' or not, your call.');
        ary.push( '</p>');
        ary.push( '</div>');
        box.innerHTML = ary.join('');
      };
      
      var singleString = function(box){
        box.innerHTML = '';
        var str = ''
        + '<div>';
        + '<p>';
        + 'You could search for it on ';
        + '<a ';
        + 'href="http://www.google.com"';
        + '/>';
        + 'Google';
        + '</a>';
        + ' or not, your call.';
        + '</p>';
        + '</div>';
        box.innerHTML = str;
      };
      
      var buildWithString = function(box){
        box.innerHTML = '';
        var str = '';
        str = str + '<div>';
        str = str + '<p>';
        str = str + 'You could search for it on ';
        str = str + '<a ';
        str = str + 'href="http://www.google.com"';
        str = str + '/>';
        str = str + 'Google';
        str = str + '</a>';
        str = str + ' or not, your call.';
        str = str + '</p>';
        str = str + '</div>';
        
        box.innerHTML = str;
      };
      var buildWithDocumentFragment = function(box){
        box.innerHTML = '';
        
        var documentFragment = document.createDocumentFragment();
        
        var div = document.createElement('div');
        var p   = document.createElement('p');
        var a   = document.createElement('a');
      
        a.setAttribute('href', 'http://www.google.com');
        a.appendChild(document.createTextNode('Google'));
        
        p.appendChild(document.createTextNode('You could search for it on '));
        p.appendChild(a);
        p.appendChild(document.createTextNode(' or not, your call.'));
        
        div.appendChild(p);
        documentFragment.appendChild(div);
        box.appendChild(documentFragment);
      };
      var run = function(){
        var box = document.getElementById('box');
        
        var arrayPushStart = +new Date();
        for (var i=0; i < 1000; i++) {
          arrayPush(box);
        };
        var arrayPushStop = +new Date();
        
        var singleStringSampleStart = +new Date();
        for (var i=0; i < 1000; i++) {
          singleString(box);
        };
        var singleStringSampleStop = +new Date();
        
        var singleStringSampleStart = +new Date();
        for (var i=0; i < 1000; i++) {
          singleString(box);
        };
        var singleStringSampleStop = +new Date();
        
        var stringSampleStart = +new Date();
        for (var i=0; i < 1000; i++) {
          buildWithString(box);
        };
        var stringSampleStop = +new Date();
        
        var domSampleStart = +new Date();
        for (var i=0; i < 1000; i++) {
          buildWithDocumentFragment(box);
        };
        var domSampleStop = +new Date();
        
        box.innerHTML = "<p>" + (arrayPushStop - arrayPushStart).toString() + "ms: " + "array pushing" + "</p>" +
                        "<p>" + (singleStringSampleStop - singleStringSampleStart).toString() + "ms: " + "single string concatenation" + "</p>" +
                        "<p>" + (stringSampleStop - stringSampleStart).toString() + "ms: " + "string concatenation" + "</p>" +
                        "<p>" + (domSampleStop - domSampleStart).toString() + "ms:" + "documentFragment append" + "</p>";
      };
    </script>
  </head>
  <body onload='run()'>
    <div id='box'></div>
  </body>
</html>